---
title: "读书笔记《大型网站技术架构》"
date: 2024-08-10T12:02:19+08:00
tags: ["读书笔记"]

---


这是 2012 年写的书，作者是李智慧，曾在阿里担任技术专家，参加阿里基础平台的开发和架构工作。

## 1.1 大型网站的特点

* 高并发，大流量

* 高可用

* 海量数据

* 用户分布广，网络状况复杂

* 安全环境恶劣

* 需求快速变更，发布频繁

* 渐进式发展（从小网站到大网站）


## 1.2 误区

* 一味追寻大厂的解决方案

大厂的解决方案值得我们去借鉴，我们也要有自己坚持的勇气，才能在技术架构中不断地进步。

* 为了技术而技术

网站技术是为业务存在的。

* 企图用技术解决所有问题

比如 12306 购票，高峰期时的并发是很高的。真正解决问题不在技术架构，而是业务架构。比如，引进排队机制，分时段购票等等。


---


# 2 架构模式

## 2.1 分层

分层结构在计算机世界无处不在，网络的 7 层通信协议是一种分层结构。大型网站也采用分层结构，可分为应用层，服务层，数据层。

* 应用层

负责业务和视图展示

* 服务层

用户管理，订单管理等等

* 数据层

数据库，缓存，文件，搜索引擎等等

分层之间要确定合理的边界和接口，开发的过程中严格遵循分层结构的约束，禁止跨层调用。

## 2.2 分割

将不同的功能和服务分割开来，包装成高内聚低耦合的模块。一方面有助于开发和维护，另一方面方便将不同的模块分布式部署，提高网站的并发能力和扩展能力。

## 2.3 分布式

分层和分割的一个主要的目的是为了切分后的模块便于分布式部署。

常用分布式方案有：

* 分布式应用和服务

* 分布式静态资源

* 分布式数据和储存

* 分布式计算


## 2.4 集群

多台服务器部署相同的应用构成集群，提高并发性和可用性。

## 2.5 缓存

* CDN （服务商）

* 反向代理（内部服务器）

* 本地缓存

* 分布式缓存


## 2.6 异步

特性：

* 提高系统的可用性

消费者故障后，数据会在消息队列服务器堆积，生产者可以继续服务。消费者恢复后，可以再次从消息队列中获取到数据。

* 提高响应速度

## 2.7 冗余

## 2.8 自动化

自动化有以下的方面：

* 发布

* 代码管理

* 测试

* 安全检测

* 监控

* 报警

* 恢复

* 资源分配

## 2.9 安全

---

# 3 核心要素

## 3.1 性能

## 3.2 可用性

网站高可用主要手段是冗余。

## 3.3 伸缩性

网站伸缩性的主要标准就是是否可用多台服务器组成集群，是否容易向集群添加服务器。

## 3.4 扩展性

衡量网站架构的扩展性好坏主要标准就是在网站增加新的业务时，是否对现有的业务无影响，不需要改动或者少改动就可以上线。

## 3.5 安全性

---

# 4 性能

## 4.1 性能测试 

### 4.1.1 性能测试指标

* 响应时间

* 并发数

系统能同时处理的请求数。

* 吞吐量

单位时间系统能处理的请求数。

* 性能计数器

System Load，对象与线程，内存，CPU，磁盘与IO等指标。

### 4.1.2 性能测试方法

* 性能测试

以系统最初设计的性能指标为预期目标，不断对系统进行施压，验证系统在资源可接受范围，是否能达到预期。

* 负载测试

增加请求数测试

* 压力测试
 
超出安全负载的情况下，对系统继续施加压力。

* 稳定性测试

系统在特定的硬件下，软件，网络环境下，给系统加载一定的业务量，运行一段时间后，检测是否稳定。

---

# 5 架构师

## 5.1 领导艺术

### 5.1.1 关注人而不是产品

一定要坚信：一群优秀的人做一件他们热爱的事，一定能取得成功。

### 5.1.2 发掘人的潜能

是事情成就了人，而不是人成就了事。与其指望优秀的人帮自己做事，不让做一件事让自己与参与的人都变得优秀。

### 5.1.3 共享美好蓝图

架构师要和项目的全体成员描绘一个蓝图，这个蓝图是团队认同的，是团队共同奋斗的目标。

蓝图应该：

* 表达清楚
产品要什么，不做什么，达到什么业务目标

* 形象

产品可以为用户创造什么价值，实现什么样的市场目标，产品最终会怎样的，需要形象地想象出来。

* 简单

一句话说明白：我们在做什么

### 5.1.4 共同参与架构

* 不要让架构成为架构师的私人财产，要允许他人参与讨论

* 允许他人维护架构和文档、

### 5.1.5 学会妥协

不要企图在项目中证明自己是对的，一定要记住，你是来做软件的，不是来当老大的。所以不要企图去证明自己有多了不起，永远不要去干这种浪费时间，伤感情的事。

### 5.1.6 成就他人

---

# 6 职场攻略

## 6.1 发现问题，寻找突破

## 6.2 提出问题，寻求支持

## 6.3 解决问题，达成绩效
